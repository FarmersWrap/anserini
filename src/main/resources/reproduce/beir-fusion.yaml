conditions:
  # ========== BM25 flat baseline ==========
  - name: flat
    display: "BM25, flat bag-of-words baseline"
    display_html: "BM25, flat bag-of-words baseline"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchCollection -threads $threads -index beir-v1.0.0-$topics.flat -topics beir-$topics -output $output -bm25 -removeQuery -hits 1000
    topics:
      - topic_key: trec-covid
        eval_key: beir-v1.0.0-trec-covid.test
        scores:
          - nDCG@10: 0.5947
      - topic_key: bioasq
        eval_key: beir-v1.0.0-bioasq.test
        scores:
          - nDCG@10: 0.5225
      - topic_key: nfcorpus
        eval_key: beir-v1.0.0-nfcorpus.test
        scores:
          - nDCG@10: 0.3218
      - topic_key: nq
        eval_key: beir-v1.0.0-nq.test
        scores:
          - nDCG@10: 0.3055
      - topic_key: hotpotqa
        eval_key: beir-v1.0.0-hotpotqa.test
        scores:
          - nDCG@10: 0.6330
      - topic_key: fiqa
        eval_key: beir-v1.0.0-fiqa.test
        scores:
          - nDCG@10: 0.2361
      - topic_key: signal1m
        eval_key: beir-v1.0.0-signal1m.test
        scores:
          - nDCG@10: 0.3304
      - topic_key: trec-news
        eval_key: beir-v1.0.0-trec-news.test
        scores:
          - nDCG@10: 0.3952
      - topic_key: robust04
        eval_key: beir-v1.0.0-robust04.test
        scores:
          - nDCG@10: 0.4070
      - topic_key: arguana
        eval_key: beir-v1.0.0-arguana.test
        scores:
          - nDCG@10: 0.3970
      - topic_key: webis-touche2020
        eval_key: beir-v1.0.0-webis-touche2020.test
        scores:
          - nDCG@10: 0.4422
      - topic_key: cqadupstack-android
        eval_key: beir-v1.0.0-cqadupstack-android.test
        scores:
          - nDCG@10: 0.3801
      - topic_key: cqadupstack-english
        eval_key: beir-v1.0.0-cqadupstack-english.test
        scores:
          - nDCG@10: 0.3453
      - topic_key: cqadupstack-gaming
        eval_key: beir-v1.0.0-cqadupstack-gaming.test
        scores:
          - nDCG@10: 0.4822
      - topic_key: cqadupstack-gis
        eval_key: beir-v1.0.0-cqadupstack-gis.test
        scores:
          - nDCG@10: 0.2901
      - topic_key: cqadupstack-mathematica
        eval_key: beir-v1.0.0-cqadupstack-mathematica.test
        scores:
          - nDCG@10: 0.2015
      - topic_key: cqadupstack-physics
        eval_key: beir-v1.0.0-cqadupstack-physics.test
        scores:
          - nDCG@10: 0.3214
      - topic_key: cqadupstack-programmers
        eval_key: beir-v1.0.0-cqadupstack-programmers.test
        scores:
          - nDCG@10: 0.2802
      - topic_key: cqadupstack-stats
        eval_key: beir-v1.0.0-cqadupstack-stats.test
        scores:
          - nDCG@10: 0.2711
      - topic_key: cqadupstack-tex
        eval_key: beir-v1.0.0-cqadupstack-tex.test
        scores:
          - nDCG@10: 0.2244
      - topic_key: cqadupstack-unix
        eval_key: beir-v1.0.0-cqadupstack-unix.test
        scores:
          - nDCG@10: 0.2749
      - topic_key: cqadupstack-webmasters
        eval_key: beir-v1.0.0-cqadupstack-webmasters.test
        scores:
          - nDCG@10: 0.3059
      - topic_key: cqadupstack-wordpress
        eval_key: beir-v1.0.0-cqadupstack-wordpress.test
        scores:
          - nDCG@10: 0.2483
      - topic_key: quora
        eval_key: beir-v1.0.0-quora.test
        scores:
          - nDCG@10: 0.7886
      - topic_key: dbpedia-entity
        eval_key: beir-v1.0.0-dbpedia-entity.test
        scores:
          - nDCG@10: 0.3180
      - topic_key: scidocs
        eval_key: beir-v1.0.0-scidocs.test
        scores:
          - nDCG@10: 0.1490
      - topic_key: fever
        eval_key: beir-v1.0.0-fever.test
        scores:
          - nDCG@10: 0.6513
      - topic_key: climate-fever
        eval_key: beir-v1.0.0-climate-fever.test
        scores:
          - nDCG@10: 0.1651
      - topic_key: scifact
        eval_key: beir-v1.0.0-scifact.test
        scores:
          - nDCG@10: 0.6789

  # ========== BGE dense search ==========
  - name: bge-base-en-v1.5.flat.onnx
    display: "bge-base-en-v1.5 w/ flat indexes (ONNX)"
    display_html: "bge-base-en-v1.5 w/ flat indexes (ONNX)"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchFlatDenseVectors -threads $threads -index beir-v1.0.0-$topics.bge-base-en-v1.5.flat -topics beir-$topics -encoder BgeBaseEn15 -output $output -removeQuery -hits 1000
    topics:
      - topic_key: trec-covid
        eval_key: beir-v1.0.0-trec-covid.test
        scores:
          - nDCG@10: 0.7815
      - topic_key: bioasq
        eval_key: beir-v1.0.0-bioasq.test
        scores:
          - nDCG@10: 0.4148
      - topic_key: nfcorpus
        eval_key: beir-v1.0.0-nfcorpus.test
        scores:
          - nDCG@10: 0.3735
      - topic_key: nq
        eval_key: beir-v1.0.0-nq.test
        scores:
          - nDCG@10: 0.5415
      - topic_key: hotpotqa
        eval_key: beir-v1.0.0-hotpotqa.test
        scores:
          - nDCG@10: 0.7259
      - topic_key: fiqa
        eval_key: beir-v1.0.0-fiqa.test
        scores:
          - nDCG@10: 0.4065
      - topic_key: signal1m
        eval_key: beir-v1.0.0-signal1m.test
        scores:
          - nDCG@10: 0.2886
      - topic_key: trec-news
        eval_key: beir-v1.0.0-trec-news.test
        scores:
          - nDCG@10: 0.4424
      - topic_key: robust04
        eval_key: beir-v1.0.0-robust04.test
        scores:
          - nDCG@10: 0.4435
      - topic_key: arguana
        eval_key: beir-v1.0.0-arguana.test
        scores:
          - nDCG@10: 0.6375
      - topic_key: webis-touche2020
        eval_key: beir-v1.0.0-webis-touche2020.test
        scores:
          - nDCG@10: 0.2571
      - topic_key: cqadupstack-android
        eval_key: beir-v1.0.0-cqadupstack-android.test
        scores:
          - nDCG@10: 0.5076
      - topic_key: cqadupstack-english
        eval_key: beir-v1.0.0-cqadupstack-english.test
        scores:
          - nDCG@10: 0.4855
      - topic_key: cqadupstack-gaming
        eval_key: beir-v1.0.0-cqadupstack-gaming.test
        scores:
          - nDCG@10: 0.5967
      - topic_key: cqadupstack-gis
        eval_key: beir-v1.0.0-cqadupstack-gis.test
        scores:
          - nDCG@10: 0.4131
      - topic_key: cqadupstack-mathematica
        eval_key: beir-v1.0.0-cqadupstack-mathematica.test
        scores:
          - nDCG@10: 0.3163
      - topic_key: cqadupstack-physics
        eval_key: beir-v1.0.0-cqadupstack-physics.test
        scores:
          - nDCG@10: 0.4724
      - topic_key: cqadupstack-programmers
        eval_key: beir-v1.0.0-cqadupstack-programmers.test
        scores:
          - nDCG@10: 0.4238
      - topic_key: cqadupstack-stats
        eval_key: beir-v1.0.0-cqadupstack-stats.test
        scores:
          - nDCG@10: 0.3728
      - topic_key: cqadupstack-tex
        eval_key: beir-v1.0.0-cqadupstack-tex.test
        scores:
          - nDCG@10: 0.3115
      - topic_key: cqadupstack-unix
        eval_key: beir-v1.0.0-cqadupstack-unix.test
        scores:
          - nDCG@10: 0.4220
      - topic_key: cqadupstack-webmasters
        eval_key: beir-v1.0.0-cqadupstack-webmasters.test
        scores:
          - nDCG@10: 0.4072
      - topic_key: cqadupstack-wordpress
        eval_key: beir-v1.0.0-cqadupstack-wordpress.test
        scores:
          - nDCG@10: 0.3547
      - topic_key: quora
        eval_key: beir-v1.0.0-quora.test
        scores:
          - nDCG@10: 0.8876
      - topic_key: dbpedia-entity
        eval_key: beir-v1.0.0-dbpedia-entity.test
        scores:
          - nDCG@10: 0.4073
      - topic_key: scidocs
        eval_key: beir-v1.0.0-scidocs.test
        scores:
          - nDCG@10: 0.2172
      - topic_key: fever
        eval_key: beir-v1.0.0-fever.test
        scores:
          - nDCG@10: 0.8629
      - topic_key: climate-fever
        eval_key: beir-v1.0.0-climate-fever.test
        scores:
          - nDCG@10: 0.3117
      - topic_key: scifact
        eval_key: beir-v1.0.0-scifact.test
        scores:
          - nDCG@10: 0.7408

  # ========== Fusion: RRF ==========
  - name: fusion-rrf
    display: "Fusion: RRF (BM25 + BGE)"
    display_html: "Fusion: RRF (BM25 + BGE)"
    display_row: ""
    command: java -cp $fatjar io.anserini.fusion.FuseRuns -runs runs/run.beir-fusion.flat.$topics.txt runs/run.beir-fusion.bge-base-en-v1.5.flat.onnx.$topics.txt -output $output -method rrf -k 1000 -depth 1000 -rrf_k 60
    topics:
      - topic_key: trec-covid
        eval_key: beir-v1.0.0-trec-covid.test
        scores:
          - nDCG@10: 0.8041
      - topic_key: bioasq
        eval_key: beir-v1.0.0-bioasq.test
        scores:
          - nDCG@10: 0.5278
      - topic_key: nfcorpus
        eval_key: beir-v1.0.0-nfcorpus.test
        scores:
          - nDCG@10: 0.3725
      - topic_key: nq
        eval_key: beir-v1.0.0-nq.test
        scores:
          - nDCG@10: 0.4831
      - topic_key: hotpotqa
        eval_key: beir-v1.0.0-hotpotqa.test
        scores:
          - nDCG@10: 0.7389
      - topic_key: fiqa
        eval_key: beir-v1.0.0-fiqa.test
        scores:
          - nDCG@10: 0.3671
      - topic_key: signal1m
        eval_key: beir-v1.0.0-signal1m.test
        scores:
          - nDCG@10: 0.3533
      - topic_key: trec-news
        eval_key: beir-v1.0.0-trec-news.test
        scores:
          - nDCG@10: 0.4855
      - topic_key: robust04
        eval_key: beir-v1.0.0-robust04.test
        scores:
          - nDCG@10: 0.5070
      - topic_key: arguana
        eval_key: beir-v1.0.0-arguana.test
        scores:
          - nDCG@10: 0.5586
      - topic_key: webis-touche2020
        eval_key: beir-v1.0.0-webis-touche2020.test
        scores:
          - nDCG@10: 0.3771
      - topic_key: cqadupstack-android
        eval_key: beir-v1.0.0-cqadupstack-android.test
        scores:
          - nDCG@10: 0.4652
      - topic_key: cqadupstack-english
        eval_key: beir-v1.0.0-cqadupstack-english.test
        scores:
          - nDCG@10: 0.4533
      - topic_key: cqadupstack-gaming
        eval_key: beir-v1.0.0-cqadupstack-gaming.test
        scores:
          - nDCG@10: 0.5671
      - topic_key: cqadupstack-gis
        eval_key: beir-v1.0.0-cqadupstack-gis.test
        scores:
          - nDCG@10: 0.3818
      - topic_key: cqadupstack-mathematica
        eval_key: beir-v1.0.0-cqadupstack-mathematica.test
        scores:
          - nDCG@10: 0.2880
      - topic_key: cqadupstack-physics
        eval_key: beir-v1.0.0-cqadupstack-physics.test
        scores:
          - nDCG@10: 0.4344
      - topic_key: cqadupstack-programmers
        eval_key: beir-v1.0.0-cqadupstack-programmers.test
        scores:
          - nDCG@10: 0.3959
      - topic_key: cqadupstack-stats
        eval_key: beir-v1.0.0-cqadupstack-stats.test
        scores:
          - nDCG@10: 0.3527
      - topic_key: cqadupstack-tex
        eval_key: beir-v1.0.0-cqadupstack-tex.test
        scores:
          - nDCG@10: 0.2895
      - topic_key: cqadupstack-unix
        eval_key: beir-v1.0.0-cqadupstack-unix.test
        scores:
          - nDCG@10: 0.3907
      - topic_key: cqadupstack-webmasters
        eval_key: beir-v1.0.0-cqadupstack-webmasters.test
        scores:
          - nDCG@10: 0.3834
      - topic_key: cqadupstack-wordpress
        eval_key: beir-v1.0.0-cqadupstack-wordpress.test
        scores:
          - nDCG@10: 0.3290
      - topic_key: quora
        eval_key: beir-v1.0.0-quora.test
        scores:
          - nDCG@10: 0.8682
      - topic_key: dbpedia-entity
        eval_key: beir-v1.0.0-dbpedia-entity.test
        scores:
          - nDCG@10: 0.4190
      - topic_key: scidocs
        eval_key: beir-v1.0.0-scidocs.test
        scores:
          - nDCG@10: 0.1948
      - topic_key: fever
        eval_key: beir-v1.0.0-fever.test
        scores:
          - nDCG@10: 0.8108
      - topic_key: climate-fever
        eval_key: beir-v1.0.0-climate-fever.test
        scores:
          - nDCG@10: 0.2812
      - topic_key: scifact
        eval_key: beir-v1.0.0-scifact.test
        scores:
          - nDCG@10: 0.7420

  # ========== Fusion: Average with min-max normalization ==========
  - name: fusion-avg
    display: "Fusion: Average (BM25 + BGE) with normalization"
    display_html: "Fusion: Average (BM25 + BGE) with normalization"
    display_row: ""
    command: java -cp $fatjar io.anserini.fusion.FuseRuns -runs runs/run.beir-fusion.flat.$topics.txt runs/run.beir-fusion.bge-base-en-v1.5.flat.onnx.$topics.txt -output $output -method average -k 1000 -depth 1000 -min_max_normalization
    topics:
      - topic_key: trec-covid
        eval_key: beir-v1.0.0-trec-covid.test
        scores:
          - nDCG@10: 0.6567
      - topic_key: bioasq
        eval_key: beir-v1.0.0-bioasq.test
        scores:
          - nDCG@10: 0.5315
      - topic_key: nfcorpus
        eval_key: beir-v1.0.0-nfcorpus.test
        scores:
          - nDCG@10: 0.3415
      - topic_key: nq
        eval_key: beir-v1.0.0-nq.test
        scores:
          - nDCG@10: 0.3241
      - topic_key: hotpotqa
        eval_key: beir-v1.0.0-hotpotqa.test
        scores:
          - nDCG@10: 0.6497
      - topic_key: fiqa
        eval_key: beir-v1.0.0-fiqa.test
        scores:
          - nDCG@10: 0.2470
      - topic_key: signal1m
        eval_key: beir-v1.0.0-signal1m.test
        scores:
          - nDCG@10: 0.3467
      - topic_key: trec-news
        eval_key: beir-v1.0.0-trec-news.test
        scores:
          - nDCG@10: 0.4162
      - topic_key: robust04
        eval_key: beir-v1.0.0-robust04.test
        scores:
          - nDCG@10: 0.4327
      - topic_key: arguana
        eval_key: beir-v1.0.0-arguana.test
        scores:
          - nDCG@10: 0.3986
      - topic_key: webis-touche2020
        eval_key: beir-v1.0.0-webis-touche2020.test
        scores:
          - nDCG@10: 0.4510
      - topic_key: cqadupstack-android
        eval_key: beir-v1.0.0-cqadupstack-android.test
        scores:
          - nDCG@10: 0.3872
      - topic_key: cqadupstack-english
        eval_key: beir-v1.0.0-cqadupstack-english.test
        scores:
          - nDCG@10: 0.3643
      - topic_key: cqadupstack-gaming
        eval_key: beir-v1.0.0-cqadupstack-gaming.test
        scores:
          - nDCG@10: 0.4957
      - topic_key: cqadupstack-gis
        eval_key: beir-v1.0.0-cqadupstack-gis.test
        scores:
          - nDCG@10: 0.3162
      - topic_key: cqadupstack-mathematica
        eval_key: beir-v1.0.0-cqadupstack-mathematica.test
        scores:
          - nDCG@10: 0.2293
      - topic_key: cqadupstack-physics
        eval_key: beir-v1.0.0-cqadupstack-physics.test
        scores:
          - nDCG@10: 0.3610
      - topic_key: cqadupstack-programmers
        eval_key: beir-v1.0.0-cqadupstack-programmers.test
        scores:
          - nDCG@10: 0.3309
      - topic_key: cqadupstack-stats
        eval_key: beir-v1.0.0-cqadupstack-stats.test
        scores:
          - nDCG@10: 0.2932
      - topic_key: cqadupstack-tex
        eval_key: beir-v1.0.0-cqadupstack-tex.test
        scores:
          - nDCG@10: 0.2364
      - topic_key: cqadupstack-unix
        eval_key: beir-v1.0.0-cqadupstack-unix.test
        scores:
          - nDCG@10: 0.3240
      - topic_key: cqadupstack-webmasters
        eval_key: beir-v1.0.0-cqadupstack-webmasters.test
        scores:
          - nDCG@10: 0.3247
      - topic_key: cqadupstack-wordpress
        eval_key: beir-v1.0.0-cqadupstack-wordpress.test
        scores:
          - nDCG@10: 0.2713
      - topic_key: quora
        eval_key: beir-v1.0.0-quora.test
        scores:
          - nDCG@10: 0.8009
      - topic_key: dbpedia-entity
        eval_key: beir-v1.0.0-dbpedia-entity.test
        scores:
          - nDCG@10: 0.3365
      - topic_key: scidocs
        eval_key: beir-v1.0.0-scidocs.test
        scores:
          - nDCG@10: 0.1527
      - topic_key: fever
        eval_key: beir-v1.0.0-fever.test
        scores:
          - nDCG@10: 0.6688
      - topic_key: climate-fever
        eval_key: beir-v1.0.0-climate-fever.test
        scores:
          - nDCG@10: 0.1742
      - topic_key: scifact
        eval_key: beir-v1.0.0-scifact.test
        scores:
          - nDCG@10: 0.6806

  # ========== Fusion: Interpolation alpha=0.5 ==========
  - name: fusion-interp
    display: "Fusion: Interpolation alpha=0.5 (BM25 + BGE)"
    display_html: "Fusion: Interpolation alpha=0.5 (BM25 + BGE)"
    display_row: ""
    command: java -cp $fatjar io.anserini.fusion.FuseRuns -runs runs/run.beir-fusion.flat.$topics.txt runs/run.beir-fusion.bge-base-en-v1.5.flat.onnx.$topics.txt -output $output -method interpolation -k 1000 -depth 1000 -alpha 0.5
    topics:
      - topic_key: trec-covid
        eval_key: beir-v1.0.0-trec-covid.test
        scores:
          - nDCG@10: 0.6567
      - topic_key: bioasq
        eval_key: beir-v1.0.0-bioasq.test
        scores:
          - nDCG@10: 0.5315
      - topic_key: nfcorpus
        eval_key: beir-v1.0.0-nfcorpus.test
        scores:
          - nDCG@10: 0.3415
      - topic_key: nq
        eval_key: beir-v1.0.0-nq.test
        scores:
          - nDCG@10: 0.3241
      - topic_key: hotpotqa
        eval_key: beir-v1.0.0-hotpotqa.test
        scores:
          - nDCG@10: 0.6497
      - topic_key: fiqa
        eval_key: beir-v1.0.0-fiqa.test
        scores:
          - nDCG@10: 0.2470
      - topic_key: signal1m
        eval_key: beir-v1.0.0-signal1m.test
        scores:
          - nDCG@10: 0.3467
      - topic_key: trec-news
        eval_key: beir-v1.0.0-trec-news.test
        scores:
          - nDCG@10: 0.4162
      - topic_key: robust04
        eval_key: beir-v1.0.0-robust04.test
        scores:
          - nDCG@10: 0.4327
      - topic_key: arguana
        eval_key: beir-v1.0.0-arguana.test
        scores:
          - nDCG@10: 0.3986
      - topic_key: webis-touche2020
        eval_key: beir-v1.0.0-webis-touche2020.test
        scores:
          - nDCG@10: 0.4510
      - topic_key: cqadupstack-android
        eval_key: beir-v1.0.0-cqadupstack-android.test
        scores:
          - nDCG@10: 0.3872
      - topic_key: cqadupstack-english
        eval_key: beir-v1.0.0-cqadupstack-english.test
        scores:
          - nDCG@10: 0.3643
      - topic_key: cqadupstack-gaming
        eval_key: beir-v1.0.0-cqadupstack-gaming.test
        scores:
          - nDCG@10: 0.4957
      - topic_key: cqadupstack-gis
        eval_key: beir-v1.0.0-cqadupstack-gis.test
        scores:
          - nDCG@10: 0.3162
      - topic_key: cqadupstack-mathematica
        eval_key: beir-v1.0.0-cqadupstack-mathematica.test
        scores:
          - nDCG@10: 0.2293
      - topic_key: cqadupstack-physics
        eval_key: beir-v1.0.0-cqadupstack-physics.test
        scores:
          - nDCG@10: 0.3610
      - topic_key: cqadupstack-programmers
        eval_key: beir-v1.0.0-cqadupstack-programmers.test
        scores:
          - nDCG@10: 0.3309
      - topic_key: cqadupstack-stats
        eval_key: beir-v1.0.0-cqadupstack-stats.test
        scores:
          - nDCG@10: 0.2932
      - topic_key: cqadupstack-tex
        eval_key: beir-v1.0.0-cqadupstack-tex.test
        scores:
          - nDCG@10: 0.2364
      - topic_key: cqadupstack-unix
        eval_key: beir-v1.0.0-cqadupstack-unix.test
        scores:
          - nDCG@10: 0.3240
      - topic_key: cqadupstack-webmasters
        eval_key: beir-v1.0.0-cqadupstack-webmasters.test
        scores:
          - nDCG@10: 0.3247
      - topic_key: cqadupstack-wordpress
        eval_key: beir-v1.0.0-cqadupstack-wordpress.test
        scores:
          - nDCG@10: 0.2713
      - topic_key: quora
        eval_key: beir-v1.0.0-quora.test
        scores:
          - nDCG@10: 0.8009
      - topic_key: dbpedia-entity
        eval_key: beir-v1.0.0-dbpedia-entity.test
        scores:
          - nDCG@10: 0.3365
      - topic_key: scidocs
        eval_key: beir-v1.0.0-scidocs.test
        scores:
          - nDCG@10: 0.1527
      - topic_key: fever
        eval_key: beir-v1.0.0-fever.test
        scores:
          - nDCG@10: 0.6688
      - topic_key: climate-fever
        eval_key: beir-v1.0.0-climate-fever.test
        scores:
          - nDCG@10: 0.1742
      - topic_key: scifact
        eval_key: beir-v1.0.0-scifact.test
        scores:
          - nDCG@10: 0.6806

